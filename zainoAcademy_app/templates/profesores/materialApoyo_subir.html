{% extends "profesores/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profesores/materialApoyo_subir.css' %}">
{% endblock %}

{% block page_title %}Material de Apoyo{% endblock %}

{% block mockUp %}

    <!-- BOTONES DE OPCIONES -->
    <div class="material-opciones">
    <!-- Redirige a la vista de subir material -->
    <a href="{% url 'materialApoyo_subir' boletin.Bol_id %}" 
       class="btn-opcion crear {% if request.resolver_match.url_name == 'materialApoyo_subir' %}active{% endif %}">
       Crear
    </a>

    <!-- Redirige a la vista de consultar material -->
    <a href="{% url 'materialApoyo_consultar' boletin.Bol_id %}" 
       class="btn-opcion consultar {% if request.resolver_match.url_name == 'materialApoyo_consultar' %}active{% endif %}">
       Consultar
    </a>
</div>

    <!-- SECCIÓN CREAR -->
    <div id="seccion-crear" class="seccion">
        <h3>Subir material de apoyo:</h3> <br>
        <form method="POST" enctype="multipart/form-data" action="{% url 'materialApoyo_subir' boletin.Bol_id %}">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="titulo">Título del material:</label>
                <input type="text" id="titulo" name="Mate_titulo" required>
            </div>
            
            <div class="form-group">
                <label for="descripcion">Descripción:</label>
                <textarea id="descripcion" name="Mate_descripcion" rows="3" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="archivo">Archivo:</label>
                <input type="file" id="archivo" name="Mate_archivo" required>
            </div>

            <div class="form-actions">
                <a href="{% url 'actividad_profesores_consultar_cursos' boletin.Per_id %}" class="volver-btn">Volver</a>
                <button type="submit" class="crear-btn">Subir material</button>
            </div>
        </form>
    </div>

    <!-- SECCIÓN CONSULTAR -->
    <div id="seccion-consultar" class="seccion oculto">
        <h3>Consultar material de apoyo:</h3>
        <ul>
            {% for material in materiales %}
                <li>
                    <strong>{{ material.Mate_titulo }}</strong> - {{ material.Mate_descripcion }}
                    <a href="{{ material.Mate_archivo.url }}" target="_blank">Descargar</a>
                </li>
            {% empty %}
                <p>No hay material de apoyo aún.</p>
            {% endfor %}
        </ul>
    </div>
</div>

<!-- SCRIPT PARA CAMBIO DE SECCIONES -->
<script>
function mostrarCrear() {
    document.getElementById("seccion-crear").classList.remove("oculto");
    document.getElementById("seccion-consultar").classList.add("oculto");
    document.getElementById("btn-crear").classList.add("active");
    document.getElementById("btn-consultar").classList.remove("active");
}

function mostrarConsultar() {
    document.getElementById("seccion-consultar").classList.remove("oculto");
    document.getElementById("seccion-crear").classList.add("oculto");
    document.getElementById("btn-consultar").classList.add("active");
    document.getElementById("btn-crear").classList.remove("active");
}
</script>

{% endblock %}