{% extends "profesores/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profesores/actividades_por_curso_materia.css' %}">
{% endblock %}

{% block page_title %}Añadir Calificacion{% endblock %}

{% block mockUp %}
<div class="content">
    <h2 class="section-title">
        Curso: {{ curso.Cur_nombre }} | Materia: {{ materia.Mtr_nombre }}
    </h2>

    <form method="post">
        {% csrf_token %}
        <table class="calificaciones-table">
            <thead>
                <tr>
                    <th>Nombre Estudiante</th>
                    <th>Entrega</th>
                    <th>Archivos</th>
                    <th>Fecha límite</th>
                    <th>Calificación</th>
                </tr>
            </thead>
            <tbody>
                {% for entrega in entregas %}
                <tr>
                    <td>{{ entrega.Est }}</td>
                    <td>{{ actividad.Act_nombre }}</td>
                    <td>
                        {% if entrega.archivos_lista %}
                            <ul>
                                {% for archivo in entrega.archivos_lista %}
                                    <li>
                                        <a href="{{ archivo.archivo.url }}" target="_blank">
                                            Ver archivo {{ forloop.counter }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p>Sin archivos</p>
                        {% endif %}
                    </td>
                    <td>{{ actividad.Act_fechaLimite|date:"d/m/Y" }}</td>
                    <td>
                        <input type="number" step="0.1" name="calificacion_{{ entrega.id }}"
                               value="{{ entrega.Act_calificacion|default:'' }}"
                               placeholder="Calificación" min="0" max="10"
                               class="calificacion-input">
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="no-entrega">No hay entregas registradas</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="acciones">
            <a href="{% url 'actividad_profesores_consultar_cursos' periodo_id %}" class="btn-volver">← Volver</a>
            <button type="submit" class="btn-guardar">Guardar</button>
        </div>
    </form>
</div>
{% endblock %}
