{% extends 'base_directivos.html' %}
{% load static %}
{% block page_title %}Usuarios{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/directivos/usuarios_formStyles.css' %}">



{% if messages %}
<div class="message-container">
    {% for message in messages %}
    <div class="floating-alert">{{ message }}</div>
    {% endfor %}
</div>
{% endif %}

<div class="action-buttons">
<a href="{% url 'crear_usuario' %}" class="btn btn-primary">Crear</a>
<a href="{% url 'lista_usuarios' %}" class="btn btn-secondary">Consultar</a>
</div>

<div class="search-container">
<input type="search" class="search-box" placeholder="Buscar Usuario..." id="searchInput">
</div>

<div class="table-container">
<table id="usuarioTable">
    <thead>
    <tr>
        <th>Nombre</th>
        <th>Tipo Usuario</th>
        <th>Correo</th>
        <th>Documento</th>
        <th>Fecha registro</th>
        <th>Acciones</th>
    </tr>
    </thead>
    <tbody>
    {% for us in usuarios %}
    <tr>
        <td>{{ us.Us_nombre }}</td>
        <td>{{ us.TipoUsuario }}</td>
        <td>{{ us.correo }}</td>
        <td>{{ us.documento }}</td>
        <td>{{ us.fecha_registro }}</td>
        <td class="actions-cell">
        <a href="{% url 'editar_usuario' us.pk %}" class="icon-btn"><span class="material-icons-outlined">edit</span></a>
        <a href="{% url 'eliminar_usuario' us.pk %}" class="icon-btn"><span class="material-icons-outlined">delete</span></a>
        </td>
    </tr>
    {% empty %}
    <tr><td colspan="5" class="no-activities">No hay usuarios registrados.</td></tr>
    {% endfor %}
    </tbody>
</table>
</div>

<script>
document.getElementById('searchInput').addEventListener('keyup', function () {
    const searchValue = this.value.toLowerCase();
    const rows = document.querySelectorAll('#usuarioTable tbody tr');
    rows.forEach(row => {
    const text = row.textContent.toLowerCase();
    row.style.display = text.includes(searchValue) ? '' : 'none';
    });
});
</script>

{% endblock %}
