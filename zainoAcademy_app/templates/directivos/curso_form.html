{% extends 'base_directivos.html' %}
{% load static %}
{% block page_title %}Curso{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/directivos/curso_formStyles.css' %}">


{% if messages %}
  <div class="message-container">
    {% for message in messages %}
      <div class="floating-alert">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}


<div class="action-buttons">
  <a href="{% url 'crear_curso' %}" class="btn btn-primary">Crear</a>
  <a href="{% url 'lista_cursos' %}" class="btn btn-secondary">Consultar</a>
</div>

<div class="search-container">
  <input type="search" class="search-box" placeholder="Buscar Curso..." id="searchInput">
</div>

<div class="table-container">
  <table id="cursoTable">
    <thead>
      <tr>
        <th>Nombre del Curso</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for curso in cursos %}
      <tr>
        <td>{{ curso.Cur_nombre }}</td>
        <td class="actions-cell">
          <a href="{% url 'editar_curso' curso.pk %}" class="icon-btn" title="Editar">
            <span class="material-icons-outlined">edit</span>
          </a>
          <div class="divider"></div>
          <a href="{% url 'eliminar_curso' curso.pk %}" class="icon-btn" title="Eliminar">
            <span class="material-icons-outlined">delete</span>
          </a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="2" class="no-activities">No hay cursos registrados.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  document.getElementById('searchInput').addEventListener('keyup', function () {
    const searchValue = this.value.toLowerCase();
    const rows = document.querySelectorAll('#cursoTable tbody tr');
    rows.forEach(row => {
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(searchValue) ? '' : 'none';
    });
  });
</script>

{% endblock %}
